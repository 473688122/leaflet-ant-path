{"version":3,"sources":["leaflet-ant-path.js"],"names":["factory","window","define","amd","exports","module","require","L","Polyline","AntPath","polyline","antPath","path","options","FeatureGroup","extend","_path","_animatedPathid","Date","getTime","_animatedPathClass","animationSpeed","initialize","LayerGroup","prototype","call","this","Util","setOptions","_map","_draw","onAdd","map","on","_calculateAnimationSpeed","onRemove","off","addLayer","optsCopy","color","pulseColor","className","zoomLevel","getZoom","animatedPolyElement","document","getElementsByClassName","animationDuration","setAttribute"],"mappings":"CAAC,SAAUA,EAASC,GAChB,YAIsB,mBAAXC,SAAyBA,OAAOC,IACvCD,QAAQ,WAAYF,GAGM,gBAAZI,SACdC,OAAOD,QAAUJ,EAAQM,QAAQ,YAIV,mBAAXL,IAA0BA,EAAOM,IAC7CN,EAAOM,EAAEC,SAASC,QAAUT,EAAQO,GAEpCN,EAAOM,EAAEG,SAASC,QAAU,SAAUC,EAAMC,GACxC,MAAO,IAAIZ,GAAOM,EAAEC,SAASC,QAAQG,EAAMC,MAGrD,SAAUN,GACR,YAQA,IAAIE,GAAUF,EAAEO,aAAaC,QACzBC,MAAO,KACPC,gBAAiB,aAAc,GAAIC,OAAOC,UAC1CC,mBAAoB,mBAEpBP,SACIQ,eAAgB,KAIpBC,WAAY,SAAUV,EAAMC,GACxBN,EAAEgB,WAAWC,UAAUF,WAAWG,KAAKC,MACvCnB,EAAEoB,KAAKC,WAAWF,KAAMb,GACxBa,KAAKG,KAAO,KACZH,KAAKV,MAAQJ,EAEbc,KAAKI,SAGTC,MAAO,SAAUC,GACbN,KAAKG,KAAOG,EACZN,KAAKG,KAAKI,GAAG,UAAWP,KAAKQ,yBAA0BR,MAEvDA,KAAKI,QACLJ,KAAKQ,4BAGTC,SAAU,SAAUH,GAChBN,KAAKG,KAAKO,IAAI,UAAWV,KAAKQ,yBAA0BR,MACxDA,KAAKG,KAAO,KACZtB,EAAEgB,WAAWC,UAAUW,SAASV,KAAKC,KAAMM,IAG/CF,MAAO,WACHJ,KAAKW,SAAS9B,EAAEG,SAASgB,KAAKV,MAAOU,KAAKb,SAE1C,IAAIyB,KACJ/B,GAAEQ,OAAOuB,EAAUZ,KAAKb,SACxByB,EAASC,MAAQb,KAAKb,QAAQ2B,YAAc,QAC5CF,EAASG,UAAYf,KAAKN,mBAAqB,IAAMM,KAAKT,gBAE1DS,KAAKW,SAAS9B,EAAEG,SAASgB,KAAKV,MAAOsB,KAGzCJ,yBAA0B,WACtB,GAAIQ,GAAYhB,KAAKG,KAAKc,UACtBC,EAAsBC,SAASC,uBAAuBpB,KAAKT,iBAC3D8B,EAAoB,IAAML,EAAY,GAG1CE,GAAoB,GAAGI,aAAa,QAAS,8BAAgCD,GAC7EH,EAAoB,GAAGI,aAAa,QAAS,2BAA6BD,GAC1EH,EAAoB,GAAGI,aAAa,QAAS,sBAAwBD,KAI7E,OAAOtC,IACRR","file":"leaflet-ant-path.min.js","sourcesContent":["(function (factory, window) {\n    \"use strict\";\n\n    /* istanbul ignore next */\n    // define an AMD module that relies on 'leaflet'\n    if (typeof define === 'function' && define.amd) {\n        define(['leaflet'], factory);\n\n        // define a Common JS module that relies on 'leaflet'\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('leaflet'));\n    }\n\n    // attach your plugin to the global 'L' variable\n    else if (typeof window !== 'undefined' && window.L) {\n        window.L.Polyline.AntPath = factory(L);\n\n        window.L.polyline.antPath = function (path, options) {\n            return new window.L.Polyline.AntPath(path, options);\n        };\n    }\n}(function (L) {\n    \"use strict\";\n\n    /**\n     * Builds a polyline with a ant path animation\n     * @constructor\n     * @extends L.FeatureGroup\n     * @exports L.Polyline.AntPath\n     */\n    var AntPath = L.FeatureGroup.extend({\n        _path: null,\n        _animatedPathid: 'ant-path-' + new Date().getTime(),\n        _animatedPathClass: 'leaflet-ant-path',\n\n        options: {\n            animationSpeed: 200\n\n        },\n\n        initialize: function (path, options) {\n            L.LayerGroup.prototype.initialize.call(this);\n            L.Util.setOptions(this, options);\n            this._map = null;\n            this._path = path;\n\n            this._draw();\n        },\n\n        onAdd: function (map) {\n            this._map = map;\n            this._map.on('zoomend', this._calculateAnimationSpeed, this);\n\n            this._draw();\n            this._calculateAnimationSpeed();\n        },\n\n        onRemove: function (map) {\n            this._map.off('zoomend', this._calculateAnimationSpeed, this);\n            this._map = null;\n            L.LayerGroup.prototype.onRemove.call(this, map);\n        },\n\n        _draw: function () {\n            this.addLayer(L.polyline(this._path, this.options));\n\n            var optsCopy = {};\n            L.extend(optsCopy, this.options);\n            optsCopy.color = this.options.pulseColor || 'white';\n            optsCopy.className = this._animatedPathClass + ' ' + this._animatedPathid;\n\n            this.addLayer(L.polyline(this._path, optsCopy));\n        },\n\n        _calculateAnimationSpeed: function () {\n            var zoomLevel = this._map.getZoom();\n            var animatedPolyElement = document.getElementsByClassName(this._animatedPathid);\n            var animationDuration = 200 / zoomLevel + 's';\n\n            //TODO Use requestAnimationFrame to support IE\n            animatedPolyElement[0].setAttribute('style', '-webkit-animation-duration:' + animationDuration);\n            animatedPolyElement[0].setAttribute('style', '-moz-animation-duration:' + animationDuration);\n            animatedPolyElement[0].setAttribute('style', 'animation-duration:' + animationDuration);\n        }\n    });\n\n    return AntPath;\n}, window));\n\n"],"sourceRoot":"/source/"}